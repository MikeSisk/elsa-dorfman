= semantic_form_for @album, :html => { :multipart => true } do |form|
  -if @album.errors.any?
    #error_explanation
      %h2= "#{pluralize(@album.errors.count, "error")} prohibited this image from being saved:"
      %ul
        - @album.errors.full_messages.each do |msg|
          %li= msg
  = form.inputs do
    = form.input :name
    = form.input :short_name, :label => "Name as it will appear in menu"
    = form.input :category, :as => :select, :collection => Category.all   
    #album_sections
      = form.semantic_fields_for :album_sections do |builder|
        = render :partial => "album_section_fields", :locals => { :f => builder }
      .links
        = link_to_add_fields "Add Section", form, :album_sections 
    #images
      %h2 Gallery Images
      = form.semantic_fields_for :images do |builder|
        = render :partial => "image_fields", :locals => { :f => builder }
      .links
        = link_to_add_fields "Add Image", form, :images
    #coordinates
      %h2 Map Coordinates
      = form.input :coordinates
  = form.buttons


  -# = f.semantic_fields_for :images do |image|
  -#   = image.input :resource, :label => "Image File"
  -#   = image_tag image.object.url(:thumb) unless image.object.new_record?